{
 "doctype": "Workflow",
 "workflow_name": "Work Order Billing Workflow",
 "document_type": "Work Order Billing",
 "is_active": 1,
 "state_field": "workflow_state",
 "states": [
  {
   "state": "Draft",
   "docstatus": 0,
   "allow_edit": "Workshop Manager",
   "update_field": "status",
   "update_value": "Draft",
   "idx": 1
  },
  {
   "state": "Pending Payment",
   "docstatus": 1,
   "allow_edit": "Cashier",
   "update_field": "status",
   "update_value": "Pending Payment",
   "idx": 2
  },
  {
   "state": "Partially Paid",
   "docstatus": 1,
   "allow_edit": "Cashier",
   "update_field": "status",
   "update_value": "Partially Paid",
   "idx": 3
  },
  {
   "state": "Fully Paid",
   "docstatus": 1,
   "allow_edit": "Cashier",
   "update_field": "status",
   "update_value": "Fully Paid",
   "idx": 4
  },
 {
  "state": "Completed",
  "docstatus": 1,
  "allow_edit": "Accountant",
  "update_field": "status",
  "update_value": "Completed",
  "idx": 5
 },
 {
  "state": "Cancelled",
  "docstatus": 2,
  "allow_edit": "Accountant",
  "update_field": "status",
  "update_value": "Cancelled",
  "idx": 6
 }
],
"transitions": [
 {
  "state": "Draft",
  "action": "Submit",
  "next_state": "Pending Payment",
  "allowed": "Workshop Manager",
  "condition": "doc.discount_amount <= doc.get_discount_threshold()",
  "idx": 1
 },
 {
  "state": "Draft",
  "action": "Submit for Approval",
  "next_state": "Pending Payment",
  "allowed": "Accountant",
  "condition": "doc.discount_amount > doc.get_discount_threshold()",
  "idx": 2
 },
 {
  "state": "Pending Payment",
  "action": "Record Partial Payment",
  "next_state": "Partially Paid",
  "allowed": "Cashier",
  "idx": 3
 },
 {
  "state": "Pending Payment",
  "action": "Record Full Payment",
  "next_state": "Fully Paid",
  "allowed": "Cashier",
  "idx": 4
 },
 {
  "state": "Partially Paid",
  "action": "Record Remaining Payment",
  "next_state": "Fully Paid",
  "allowed": "Cashier",
  "idx": 5
 },
 {
  "state": "Fully Paid",
  "action": "Complete",
  "next_state": "Completed",
  "allowed": "Accountant",
  "idx": 6
 },
 {
  "state": "Pending Payment",
  "action": "Cancel",
  "next_state": "Cancelled",
  "allowed": "Accountant",
  "idx": 7
 },
 {
  "state": "Partially Paid",
  "action": "Cancel",
  "next_state": "Cancelled",
  "allowed": "Accountant",
  "idx": 8
 },
 {
  "state": "Fully Paid",
  "action": "Cancel",
  "next_state": "Cancelled",
  "allowed": "Accountant",
  "idx": 9
 },
 {
  "state": "Completed",
  "action": "Cancel",
  "next_state": "Cancelled",
  "allowed": "Accountant",
  "idx": 10
 },
 {
  "state": "Cancelled",
  "action": "Amend",
  "next_state": "Draft",
  "allowed": "Accountant",
  "idx": 11
 }
]
}
